"use client"
import React, { createContext, useContext, useState, ReactNode, useEffect } from 'react';
import { useRouter, usePathname } from 'next/navigation';

type Language = 'zh' | 'en';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// ÁøªËØëÂÜÖÂÆπ
const translations = {
  zh: {
    'nav.tools': 'Â∑•ÂÖ∑ÁÆ±',
    'nav.github': 'Star & Fork',
    'nav.blog': 'Mofei ÁöÑÂçöÂÆ¢',
    'title': 'Â∑•ÂÖ∑ÂêàÈõÜ',
    'subtitle': 'Ëøô‰∫õÊòØMofeiÂú®ÂºÄÂèëËøáÁ®ã‰∏≠ÁªèÂ∏∏‰ΩøÁî®ÁöÑ‰æøÊç∑Â∑•ÂÖ∑„ÄÇÂàÜ‰∫´ÁªôÂ§ßÂÆ∂ÔºåÂ∏åÊúõËÉΩËÆ©‰Ω†ÁöÑÂ∑•‰ΩúÊõ¥ËΩªÊùæ‰∏Ä‰∫õ üòä',
    'categories.text': 'ÊñáÊú¨Â∑•ÂÖ∑',
    'categories.dev': 'ÂºÄÂèëÂ∑•ÂÖ∑',
    'categories.gis': 'GISÂú∞ÁêÜÂ∑•ÂÖ∑',
    'categories.design': 'ËÆæËÆ°Â∑•ÂÖ∑',
    'categories.util': 'ÂÆûÁî®Â∑•ÂÖ∑',
    'categories.other': 'ÂÖ∂‰ªñ',
    'tools.base64.name': 'Base64',
    'tools.base64.description': 'Base64ÁºñÁ†ÅËß£Á†ÅÂ∑•ÂÖ∑ÔºåÁî®‰∫éÊñáÊú¨ËΩ¨Êç¢',
    'tools.base64.category': 'ÂºÄÂèëÂ∑•ÂÖ∑',
    'tools.geojson.name': 'GeoJSONÈ¢ÑËßà',
    'tools.geojson.description': 'GeoJSONÊñá‰ª∂È¢ÑËßàÈìæÊé•ÁîüÊàêÂô®ÔºåÂø´ÈÄüÁîüÊàêgeojson.ioÈ¢ÑËßàURL',
    'tools.geojson.category': 'GISÂ∑•ÂÖ∑',
    'tools.json-extract.name': 'JSONË∑ØÂæÑÊèêÂèñ',
    'tools.json-extract.description': '‰ΩøÁî®JSONPathËØ≠Ê≥ï‰ªéJSONÊï∞ÊçÆ‰∏≠ÊèêÂèñÁâπÂÆöÂÄºÔºåÊîØÊåÅÂ§öÂàóÊèêÂèñ',
    'tools.json-extract.category': 'ÂºÄÂèëÂ∑•ÂÖ∑',
    'tools.coordinate-converter.name': 'GISÂùêÊ†áËΩ¨Êç¢',
    'tools.coordinate-converter.description': 'ÊîØÊåÅÂ§öÁßçÂú∞ÁêÜÂùêÊ†áÁ≥ªÁªü‰πãÈó¥ÁöÑÁõ∏‰∫íËΩ¨Êç¢',
    'tools.coordinate-converter.category': 'GISÂ∑•ÂÖ∑',
    'tools.bbox.name': 'BBoxÁªòÂà∂Â∑•ÂÖ∑',
    'tools.bbox.description': 'Âú®‰∫§‰∫íÂºèÂú∞Âõæ‰∏äÁªòÂà∂Áü©ÂΩ¢Âå∫ÂüüÁîüÊàêËæπÁïåÊ°ÜÂùêÊ†á',
    'tools.bbox.category': 'GISÂ∑•ÂÖ∑',
    'footer.copyright': '¬© 2025 Mofei',
    'footer.moreTools': 'Êõ¥Â§öÂ∑•ÂÖ∑Âç≥Â∞ÜÊé®Âá∫',
    'footer.moreToolsDesc': 'Êõ¥Â§öÂÆûÁî®Â∑•ÂÖ∑Ê≠£Âú®ÂºÄÂèë‰∏≠ÔºåÂåÖÊã¨JSONÊ†ºÂºèÂåñ„ÄÅÈ¢úËâ≤Â∑•ÂÖ∑„ÄÅÊ≠£ÂàôÊµãËØïÁ≠âÁ≠â„ÄÇÊï¨ËØ∑ÊúüÂæÖÔºÅ',
    'footer.bigText.desktop': 'MOFEI DEVELOPMENT TOOLS.',
    'footer.bigText.mobile1': 'Mpfei Tools',
    'footer.bigText.mobile2': 'Development Tools!',
    'base64.title': 'Base64 ÁºñÁ†ÅËß£Á†ÅÂ∑•ÂÖ∑',
    'base64.subtitle': 'Âø´ÈÄüÁöÑ Base64 ÁºñÁ†ÅÂíåËß£Á†ÅËΩ¨Êç¢',
    'base64.backToTools': 'ËøîÂõûÂ∑•ÂÖ∑ÈõÜ',
    'base64.encode': 'ÁºñÁ†Å',
    'base64.decode': 'Ëß£Á†Å',
    'base64.inputText': 'ËæìÂÖ•ÊñáÊú¨',
    'base64.inputBase64': 'ËæìÂÖ• Base64',
    'base64.outputBase64': 'ËæìÂá∫ Base64',
    'base64.outputText': 'ËæìÂá∫ÊñáÊú¨',
    'base64.placeholderEncode': 'ËæìÂÖ•Ë¶ÅÁºñÁ†ÅÁöÑÊñáÊú¨...',
    'base64.placeholderDecode': 'ËæìÂÖ•Ë¶ÅËß£Á†ÅÁöÑ Base64 Â≠óÁ¨¶‰∏≤...',
    'base64.startEncode': 'ÂºÄÂßãÁºñÁ†Å',
    'base64.startDecode': 'ÂºÄÂßãËß£Á†Å',
    'base64.clear': 'Ê∏ÖÁ©∫',
    'base64.copy': 'Â§çÂà∂',
    'base64.resultPlaceholder': 'ËΩ¨Êç¢ÁªìÊûúÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå...',
    'base64.decodeError': 'Ëß£Á†ÅÂ§±Ë¥•ÔºöÊó†ÊïàÁöÑ Base64 Â≠óÁ¨¶‰∏≤',
    'base64.history': 'ËΩ¨Êç¢ÂéÜÂè≤',
    'base64.clearHistory': 'Ê∏ÖÁ©∫ÂéÜÂè≤',
    'base64.input': 'ËæìÂÖ•Ôºö',
    'base64.output': 'ËæìÂá∫Ôºö',
    'base64.justNow': 'ÂàöÂàö',
    'base64.minutesAgo': 'ÂàÜÈíüÂâç',
    'base64.hoursAgo': 'Â∞èÊó∂Ââç',
    'base64.usageTitle': '‰ΩøÁî®ËØ¥Êòé',
    'base64.usage1': 'Base64 ÊòØ‰∏ÄÁßç‰ΩøÁî® 64 ‰∏™ÂèØÊâìÂç∞Â≠óÁ¨¶Êù•Ë°®Á§∫‰∫åËøõÂà∂Êï∞ÊçÆÁöÑÊñπÊ≥ï',
    'base64.usage2': 'ÊîØÊåÅ‰∏≠ÊñáÂíåÂÖ∂‰ªñ Unicode Â≠óÁ¨¶ÁöÑÁºñÁ†Å/Ëß£Á†Å',
    'base64.usage3': 'ÊâÄÊúâÂ§ÑÁêÜÈÉΩÂú®ÊÇ®ÁöÑÊµèËßàÂô®Êú¨Âú∞ÂÆåÊàêÔºå‰∏ç‰ºö‰∏ä‰º†Êï∞ÊçÆÂà∞ÊúçÂä°Âô®',
    'base64.usage4': 'ÁÇπÂáªÂéÜÂè≤ËÆ∞ÂΩïÈ°πÂèØ‰ª•Âø´ÈÄüÈáçÂ§ç‰πãÂâçÁöÑËΩ¨Êç¢',
    'base64.share': 'ÂàÜ‰∫´',
    'base64.shareResult': 'ÂàÜ‰∫´ÁªìÊûú',
    'base64.shareCopied': 'ÂàÜ‰∫´ÈìæÊé•Â∑≤Â§çÂà∂ÔºÅ',
    'geojson.title': 'GeoJSON È¢ÑËßàÂ∑•ÂÖ∑',
    'geojson.subtitle': 'Â∞ÜGeoJSONÊï∞ÊçÆÁîüÊàêgeojson.ioÈ¢ÑËßàÈìæÊé•',
    'geojson.backToTools': 'ËøîÂõûÂ∑•ÂÖ∑ÈõÜ',
    'geojson.inputLabel': 'ËæìÂÖ• GeoJSON',
    'geojson.outputLabel': 'È¢ÑËßàÈìæÊé•',
    'geojson.placeholder': 'Á≤òË¥¥ÊÇ®ÁöÑGeoJSONÊï∞ÊçÆ...',
    'geojson.loadExample': 'Âä†ËΩΩÁ§∫‰æã',
    'geojson.generate': 'ÁîüÊàêÈ¢ÑËßàÈìæÊé•',
    'geojson.clear': 'Ê∏ÖÁ©∫',
    'geojson.copy': 'Â§çÂà∂',
    'geojson.openPreview': 'ÊâìÂºÄÈ¢ÑËßà',
    'geojson.resultPlaceholder': 'ÁîüÊàêÁöÑÈ¢ÑËßàÈìæÊé•Â∞ÜÊòæÁ§∫Âú®ËøôÈáå...',
    'geojson.validationError': 'Êó†ÊïàÁöÑGeoJSONÊ†ºÂºè',
    'geojson.shareCopied': 'È¢ÑËßàÈìæÊé•Â∑≤Â§çÂà∂ÔºÅ',
    'geojson.usageTitle': '‰ΩøÁî®ËØ¥Êòé',
    'geojson.usage1': 'Á≤òË¥¥ÊúâÊïàÁöÑGeoJSONÊï∞ÊçÆÂà∞ËæìÂÖ•Ê°Ü‰∏≠',
    'geojson.usage2': 'ÊîØÊåÅFeature„ÄÅFeatureCollectionÁ≠âÊâÄÊúâGeoJSONÁ±ªÂûã',
    'geojson.usage3': 'ÁîüÊàêÁöÑÈìæÊé•ÂèØÁõ¥Êé•Âú®geojson.io‰∏≠Êü•ÁúãÂíåÁºñËæë',
    'geojson.usage4': 'Â§ßÊñá‰ª∂Ëá™Âä®‰ΩøÁî®GitHub GistÂ≠òÂÇ®ÔºåÊ∞∏‰πÖÂèØËÆøÈóÆ',
    'geojson.usage5': 'ÈÄÇÂêàÂú∞ÁêÜÊï∞ÊçÆÂèØËßÜÂåñÂíåÂàÜ‰∫´',
    'geojson.storageMethod': 'Â≠òÂÇ®ÊñπÂºè',
    'geojson.largeFile': 'Â§ßÊñá‰ª∂',
    'geojson.smallFile': 'Â∞èÊñá‰ª∂',
    'geojson.urlMethod': 'URLÊñπÂºè',
    'geojson.urlMethodDesc': 'Âø´ÈÄüÔºå‰ΩÜÊúâÂ§ßÂ∞èÈôêÂà∂',
    'geojson.gistMethod': 'GitHub Gist',
    'geojson.gistMethodDesc': 'ÊîØÊåÅÂ§ßÊñá‰ª∂ÔºåÊ∞∏‰πÖÂ≠òÂÇ®',
    'geojson.largeSizeWarning': '‚ö†Ô∏è Êñá‰ª∂ËæÉÂ§ßÔºåÂª∫ËÆÆ‰ΩøÁî®GistÊñπÂºè‰ª•Ëé∑ÂæóÊõ¥Â•ΩÁöÑ‰ΩìÈ™å',
    'geojson.uploading': '‰∏ä‰º†‰∏≠...',
    'geojson.gistError': 'ÂàõÂª∫GistÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï',
    'geojson.githubToken': 'GitHub Token',
    'geojson.optional': 'ÂèØÈÄâ',
    'geojson.tokenPlaceholder': 'ËæìÂÖ•‰Ω†ÁöÑGitHub Personal Access Token...',
    'geojson.tokenHelp': 'Êèê‰æõTokenÂèØÈÅøÂÖçAPIÈôêÂà∂Âπ∂ÁÆ°ÁêÜ‰Ω†ÁöÑGist',
    'geojson.howToGet': 'Â¶Ç‰ΩïËé∑ÂèñÔºü',
    'geojson.tokenStepsTitle': 'Ëé∑ÂèñGitHub Personal Access TokenÊ≠•È™§Ôºö',
    'geojson.tokenStep1': 'ËÆøÈóÆ GitHub.com Âπ∂ÁôªÂΩï‰Ω†ÁöÑË¥¶Êà∑',
    'geojson.tokenStep2': 'ËøõÂÖ• Settings > Developer settings > Personal access tokens > Tokens (classic)',
    'geojson.tokenStep3': 'ÁÇπÂáª "Generate new token" > "Generate new token (classic)"',
    'geojson.tokenStep4': 'ÈÄâÊã© "gist" ÊùÉÈôêÔºàÂÖ∂‰ªñÊùÉÈôêÂèØ‰∏çÈÄâÔºâ',
    'geojson.tokenStep5': 'ÁÇπÂáªÁîüÊàêÔºåÂ§çÂà∂ÁîüÊàêÁöÑtokenÂπ∂Á≤òË¥¥Âà∞‰∏äÈù¢ÁöÑËæìÂÖ•Ê°Ü',
    'geojson.tokenNote': 'Ê≥®ÊÑè',
    'geojson.tokenNoteDesc': 'Token‰ªÖÂú®Êú¨Ê¨°‰ºöËØù‰∏≠‰ΩøÁî®Ôºå‰∏ç‰ºöË¢´‰øùÂ≠ò„ÄÇÂ¶ÇÈúÄÁÆ°ÁêÜGistÔºåÂª∫ËÆÆ‰øùÂ≠òtokenÂà∞ÂØÜÁ†ÅÁÆ°ÁêÜÂô®‰∏≠„ÄÇ',
    'geojson.loginWithGitHub': 'GitHubÁôªÂΩï',
    'geojson.useToken': '‰ΩøÁî®Token',
    'geojson.signInWithGitHub': '‰ΩøÁî®GitHubÁôªÂΩï',
    'geojson.loggedInAs': 'Â∑≤ÁôªÂΩï‰∏∫',
    'geojson.gistWillBeCreated': 'GistÂ∞ÜÂàõÂª∫Âà∞‰Ω†ÁöÑË¥¶Êà∑',
    'geojson.logout': 'ÁôªÂá∫',
    'geojson.oauthError': 'GitHubÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',
    'geojson.signingIn': 'ÁôªÂΩï‰∏≠...',
    'geojson.deviceFlow.instruction': 'ËØ∑Âú®Êñ∞Ê†áÁ≠æÈ°µ‰∏≠ËÆøÈóÆGitHubÂπ∂ËæìÂÖ•‰ª•‰∏ã‰ª£Á†ÅÔºö',
    'geojson.deviceFlow.openGitHub': 'ÊâìÂºÄGitHubÊéàÊùÉÈ°µÈù¢',
    'geojson.deviceFlow.copyCode': 'Â§çÂà∂‰ª£Á†Å',
    'geojson.deviceFlow.waiting': 'ÊéàÊùÉÂÆåÊàêÂêéÔºåÊ≠§È°µÈù¢Â∞ÜËá™Âä®Êõ¥Êñ∞',
    'geojson.deviceFlow.pollingInterval': 'ËΩÆËØ¢Èó¥Èöî',
    'geojson.deviceFlow.seconds': 'Áßí',
    'geojson.loginSaved': 'ÁôªÂΩïÁä∂ÊÄÅÂ∑≤‰øùÂ≠òÔºå‰∏ãÊ¨°ËÆøÈóÆÊó†ÈúÄÈáçÊñ∞ÁôªÂΩï',
    'geojson.history': 'ÂéÜÂè≤ËÆ∞ÂΩï',
    'geojson.clearHistory': 'Ê∏ÖÁ©∫ÂéÜÂè≤',
    'geojson.noHistory': 'ÊöÇÊó†ÂéÜÂè≤ËÆ∞ÂΩï',
    'geojson.viewGist': 'Êü•ÁúãGist',
    'geojson.openPreviewNew': 'ÊâìÂºÄÈ¢ÑËßà',
    'geojson.timeAgo': 'Ââç',
    'geojson.fileTooLargeForUrl': '‚ö†Ô∏è Êñá‰ª∂ËæÉÂ§ßÔºåURLÂèØËÉΩËøáÈïø„ÄÇÂ¶ÇÊûúÈìæÊé•Êó†Ê≥ïÊâìÂºÄÔºåÂª∫ËÆÆ‰ΩøÁî®GistÊñπÂºè„ÄÇ',
    'geojson.autoSwitchToGist': 'Êï∞ÊçÆËøá‰∫éÂ§çÊùÇÔºåÊó†Ê≥ï‰ΩøÁî®URLÊñπÂºè„ÄÇÁ≥ªÁªüÂ∑≤Ëá™Âä®ÂàáÊç¢Âà∞GistÊñπÂºè„ÄÇ',
    'json-extract.title': 'JSONË∑ØÂæÑÊèêÂèñÂ∑•ÂÖ∑',
    'json-extract.subtitle': '‰ΩøÁî®JSONPathË°®ËææÂºè‰ªéJSONÊï∞ÊçÆ‰∏≠ÊèêÂèñÂÄº',
    'json-extract.backToTools': 'ËøîÂõûÂ∑•ÂÖ∑ÈõÜ',
    'json-extract.jsonData': 'JSONÊï∞ÊçÆ',
    'json-extract.loadExample': 'Âä†ËΩΩÁ§∫‰æã',
    'json-extract.placeholder': 'Âú®Ê≠§Á≤òË¥¥ÊÇ®ÁöÑJSONÊï∞ÊçÆ...',
    'json-extract.suggestedPaths': 'Âª∫ËÆÆÁöÑÂàóË∑ØÂæÑ',
    'json-extract.suggestedPathsDesc': 'ÁÇπÂáªÂª∫ËÆÆÁöÑË∑ØÂæÑÂ∞ÜÂÖ∂Ê∑ªÂä†‰∏∫Êñ∞ÂàóÔºö',
    'json-extract.extractionColumns': 'ÊèêÂèñÂàó',
    'json-extract.addColumn': 'Ê∑ªÂä†Âàó',
    'json-extract.columnName': 'ÂàóÂêç',
    'json-extract.columnPath': 'JSONPathÔºà‰æãÂ¶ÇÔºö$.properties.titleÔºâ',
    'json-extract.extractData': 'ÊèêÂèñÊï∞ÊçÆ',
    'json-extract.processing': 'Â§ÑÁêÜ‰∏≠...',
    'json-extract.extractedData': 'ÊèêÂèñÁöÑÊï∞ÊçÆ',
    'json-extract.rows': 'Ë°å',
    'json-extract.exportCSV': 'ÂØºÂá∫CSV',
    'json-extract.copyMarkdown': 'Â§çÂà∂ Markdown',
    'json-extract.markdownCopied': 'Markdown Â∑≤Â§çÂà∂ÔºÅ',
    'json-extract.compareMode': 'ÂØπÊØîÊ®°Âºè',
    'json-extract.singleMode': 'Âçï‰∏ÄÊ®°Âºè',
    'json-extract.jsonData1': 'JSON Êï∞ÊçÆ 1',
    'json-extract.jsonData2': 'JSON Êï∞ÊçÆ 2',
    'json-extract.compareResults': 'ÂØπÊØîÁªìÊûú',
    'json-extract.copyPathsFromJson1': 'Â§çÂà∂JSON1ÁöÑË∑ØÂæÑ',
    'json-extract.loadCompareExample': 'Âä†ËΩΩÂØπÊØîÁ§∫‰æã',
    'json-extract.comparisonLegend': 'ÂØπÊØîËØ¥Êòé',
    'json-extract.legendSame': 'Áõ∏Âêå',
    'json-extract.legendDifferent': '‰∏çÂêå',
    'json-extract.legendOnlyJson1': '‰ªÖJSON1Êúâ',
    'json-extract.legendOnlyJson2': '‰ªÖJSON2Êúâ',
    'json-extract.clear': 'Ê∏ÖÁ©∫',
    'json-extract.clearAllColumns': 'Ê∏ÖÁ©∫ÊâÄÊúâÂàó',
    'json-extract.usageTitle': 'JSONPath Á§∫‰æã',
    'json-extract.usage1': '‰ªéÂ±ûÊÄß‰∏≠ÊèêÂèñÊ†áÈ¢ò',
    'json-extract.usage2': '‰ªéÊâÄÊúâÁâπÂæÅ‰∏≠ÊèêÂèñÂêçÁß∞',
    'json-extract.usage3': '‰ªéÊï∞ÊçÆÊï∞ÁªÑÁ¨¨‰∏ÄÈ°π‰∏≠ÊèêÂèñÂÄº',
    'json-extract.usage4': '‰ªéÊâÄÊúâÁî®Êà∑ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊèêÂèñÈÇÆÁÆ±',
    'json-extract.usage5': '‰ªéÊâÄÊúâÈ°πÁõÆ‰∏≠ÊèêÂèñÊâÄÊúâÊ†áÁ≠æ',
    'json-extract.enterJsonData': 'ËØ∑ËæìÂÖ•JSONÊï∞ÊçÆ',
    'coordinate-converter.title': 'GISÂùêÊ†áËΩ¨Êç¢Â∑•ÂÖ∑',
    'coordinate-converter.subtitle': 'ÊîØÊåÅÂ§öÁßçÂú∞ÁêÜÂùêÊ†áÁ≥ªÁªü‰πãÈó¥ÁöÑÁõ∏‰∫íËΩ¨Êç¢',
    'coordinate-converter.backToTools': 'ËøîÂõûÂ∑•ÂÖ∑ÈõÜ',
    'coordinate-converter.inputCoordinates': 'ËæìÂÖ•ÂùêÊ†á',
    'coordinate-converter.sourceSystem': 'Ê∫êÂùêÊ†áÁ≥ªÁªü',
    'coordinate-converter.coordinates': 'ÂùêÊ†áÂÄº',
    'coordinate-converter.example': 'Á§∫‰æã',
    'coordinate-converter.convert': 'ËΩ¨Êç¢',
    'coordinate-converter.converting': 'ËΩ¨Êç¢‰∏≠...',
    'coordinate-converter.loadExample': 'Âä†ËΩΩÁ§∫‰æã',
    'coordinate-converter.clear': 'Ê∏ÖÁ©∫',
    'coordinate-converter.results': 'ËΩ¨Êç¢ÁªìÊûú',
    'coordinate-converter.copy': 'Â§çÂà∂',
    'coordinate-converter.copied': 'Â∑≤Â§çÂà∂',
    'coordinate-converter.share': 'Â§çÂà∂ÁªìÊûúÈìæÊé•',
    'coordinate-converter.shared': 'ÈìæÊé•Â∑≤Â§çÂà∂',
    'coordinate-converter.export': 'ÂØºÂá∫',
    'coordinate-converter.exportJSON': 'ÂØºÂá∫JSON',
    'coordinate-converter.exportCSV': 'ÂØºÂá∫CSV',
    'coordinate-converter.shareResults': 'Â§çÂà∂ÁªìÊûúÈìæÊé•',
    'coordinate-converter.sourceCoordinates': 'ÂéüÂßãÂùêÊ†á',
    'coordinate-converter.sharedFrom': 'ÂàÜ‰∫´Êù•Ê∫ê',
    'coordinate-converter.openLink': 'ÊâìÂºÄÈìæÊé•',
    'coordinate-converter.loadingFromUrl': 'Ê≠£Âú®‰ªéÂàÜ‰∫´ÈìæÊé•Âä†ËΩΩÂùêÊ†á...',
    'coordinate-converter.enterCoordinates': 'ËØ∑ËæìÂÖ•ÂùêÊ†á',
    'coordinate-converter.usageTitle': 'ÊîØÊåÅÁöÑÂùêÊ†áÁ≥ªÁªü',
    'coordinate-converter.usage1': '‰∏ñÁïåÂ§ßÂú∞ÊµãÈáèÁ≥ªÁªüÔºåGPSÊ†áÂáÜÂùêÊ†áÁ≥ª',
    'coordinate-converter.usage2': '‰∏≠ÂõΩÂä†ÂØÜÂùêÊ†áÁ≥ªÔºåÁî®‰∫éÂõΩÂÜÖÂú∞ÂõæÊúçÂä°',
    'coordinate-converter.usage3': 'ÁôæÂ∫¶Âú∞ÂõæÂùêÊ†áÁ≥ª',
    'coordinate-converter.usage4': 'ÈÄöÁî®Ê®™ËΩ¥Â¢®Âç°ÊâòÊäïÂΩ±ÂùêÊ†áÁ≥ª',
    'coordinate-converter.usage5': 'ÁΩëÁªúÂú∞ÂõæÊ†áÂáÜÊäïÂΩ±ÂùêÊ†áÁ≥ª',
    'bbox.title': 'BBoxÁªòÂà∂Â∑•ÂÖ∑',
    'bbox.subtitle': 'Âú®Âú∞Âõæ‰∏äÁªòÂà∂Áü©ÂΩ¢Âå∫ÂüüÁîüÊàêËæπÁïåÊ°ÜÂùêÊ†á',
    'bbox.backToTools': 'ËøîÂõûÂ∑•ÂÖ∑ÈõÜ',
    'bbox.inputBbox': 'ËæìÂÖ•ËæπÁïåÊ°Ü',
    'bbox.coordinates': 'ÂùêÊ†á (ÊúÄÂ∞èÁªèÂ∫¶, ÊúÄÂ∞èÁ∫¨Â∫¶, ÊúÄÂ§ßÁªèÂ∫¶, ÊúÄÂ§ßÁ∫¨Â∫¶)',
    'bbox.example': 'Á§∫‰æã',
    'bbox.convert': 'ËΩ¨Êç¢',
    'bbox.converting': 'ËΩ¨Êç¢‰∏≠...',
    'bbox.loadExample': 'Âä†ËΩΩÁ§∫‰æã',
    'bbox.clear': 'Ê∏ÖÁ©∫',
    'bbox.results': 'ÁªìÊûú',
    'bbox.copy': 'Â§çÂà∂',
    'bbox.copied': 'Â∑≤Â§çÂà∂',
    'bbox.share': 'ÂàÜ‰∫´',
    'bbox.shared': 'ÂàÜ‰∫´ÈìæÊé•Â∑≤Â§çÂà∂',
    'bbox.exportGeoJSON': 'ÂØºÂá∫GeoJSON',
    'bbox.info': 'ËæπÁïåÊ°Ü‰ø°ÊÅØ',
    'bbox.centerPoint': '‰∏≠ÂøÉÁÇπ',
    'bbox.width': 'ÂÆΩÂ∫¶',
    'bbox.height': 'È´òÂ∫¶',
    'bbox.area': 'Èù¢ÁßØ',
    'bbox.enterBbox': 'ËØ∑ËæìÂÖ•ËæπÁïåÊ°ÜÂùêÊ†á',
    'bbox.loadingFromUrl': 'Ê≠£Âú®‰ªéURLÂä†ËΩΩ...',
    'bbox.usageTitle': '‰ΩøÁî®ËØ¥Êòé',
    'bbox.usage1': 'ËæìÂÖ•MinLng, MinLat, MaxLng, MaxLatÊ†ºÂºèÁöÑÂùêÊ†á',
    'bbox.usage2': 'ÊîØÊåÅÂ§öÁßçÊ†ºÂºèÔºöÂ∏¶Êã¨Âè∑„ÄÅÂºïÂè∑ÊàñÁ∫ØÊñáÊú¨',
    'bbox.usage3': 'ÁÇπÂáªËΩ¨Êç¢Êü•Áúã‰∏çÂêåÊ†ºÂºèÁöÑÁªìÊûú',
    'bbox.usage4': '‰ΩøÁî®Â§çÂà∂ÊåâÈíÆÂ§çÂà∂ÁâπÂÆöÊ†ºÂºè',
    'bbox.usage5': 'ÂØºÂá∫‰∏∫GeoJSONÁî®‰∫éÂú∞ÂõæÂ∫îÁî®',
    'footer.descriptionBefore': 'Ê¨¢ËøéËÆøÈóÆÊàëÁöÑÂçöÂÆ¢ ',
    'footer.descriptionAfter': '„ÄÇÊàëÁî®ÂøÉÊï¥ÁêÜ‰∫ÜËøô‰∫õÂºÄÂèëÂ∑•ÂÖ∑ÔºåÂ∏åÊúõËÉΩËÆ©ÁºñÁ®ãÂèòÂæóÊõ¥ËΩªÊùæÊÑâÂø´‚Äî‚ÄîÊ¨¢Ëøé‰ΩìÈ™åÂíåÂàÜ‰∫´ÔºÅ'
  },
  en: {
    'nav.tools': 'All Tools',
    'nav.github': 'Star & Fork', 
    'nav.blog': "Mofei's Blog",
    'title': 'Tools Collection',
    'subtitle': 'These are the handy tools Mofei frequently uses during development. Sharing them with you, hoping to make your work a bit easier üòä',
    'categories.text': 'Text Tools',
    'categories.dev': 'Development Tools',
    'categories.gis': 'GIS & Mapping Tools',
    'categories.design': 'Design Tools', 
    'categories.util': 'Utility Tools',
    'categories.other': 'Others',
    'tools.base64.name': 'Base64',
    'tools.base64.description': 'Base64 encode/decode tool for text conversion',
    'tools.base64.category': 'Development Tool',
    'tools.geojson.name': 'GeoJSON Preview',
    'tools.geojson.description': 'Generate geojson.io preview links for GeoJSON data visualization',
    'tools.geojson.category': 'GIS Tool',
    'tools.json-extract.name': 'JSON Path Extractor',
    'tools.json-extract.description': 'Extract specific values from JSON data using JSONPath syntax with multi-column support',
    'tools.json-extract.category': 'Development Tool',
    'tools.coordinate-converter.name': 'GIS Coordinate Converter',
    'tools.coordinate-converter.description': 'Convert coordinates between different geographic coordinate systems',
    'tools.coordinate-converter.category': 'GIS Tool',
    'tools.bbox.name': 'BBox Drawing Tool',
    'tools.bbox.description': 'Draw rectangle areas on interactive maps to generate bounding box coordinates',
    'tools.bbox.category': 'GIS Tool',
    'footer.copyright': '¬© 2025 Mofei',
    'footer.moreTools': 'More Tools Coming',
    'footer.moreToolsDesc': 'More useful tools are in development, including JSON formatter, color tools, regex tester, and more. Stay tuned!',
    'footer.bigText.desktop': 'MOFEI DEVELOPMENT TOOLS.',
    'footer.bigText.mobile1': 'MOFEI TOOLS!',
    'footer.bigText.mobile2': 'DEVELOPMENT!',
    'base64.title': 'Base64 Encode/Decode Tool',
    'base64.subtitle': 'Quick Base64 encoding and decoding conversion',
    'base64.backToTools': 'Back to Tools',
    'base64.encode': 'Encode',
    'base64.decode': 'Decode',
    'base64.inputText': 'Input Text',
    'base64.inputBase64': 'Input Base64',
    'base64.outputBase64': 'Output Base64',
    'base64.outputText': 'Output Text',
    'base64.placeholderEncode': 'Enter text to encode...',
    'base64.placeholderDecode': 'Enter Base64 string to decode...',
    'base64.startEncode': 'Start Encode',
    'base64.startDecode': 'Start Decode',
    'base64.clear': 'Clear',
    'base64.copy': 'Copy',
    'base64.resultPlaceholder': 'Conversion result will appear here...',
    'base64.decodeError': 'Decode failed: Invalid Base64 string',
    'base64.history': 'Conversion History',
    'base64.clearHistory': 'Clear History',
    'base64.input': 'Input:',
    'base64.output': 'Output:',
    'base64.justNow': 'Just now',
    'base64.minutesAgo': 'm ago',
    'base64.hoursAgo': 'h ago',
    'base64.usageTitle': 'Usage Instructions',
    'base64.usage1': 'Base64 is a method to represent binary data using 64 printable characters',
    'base64.usage2': 'Supports encoding/decoding of Chinese and other Unicode characters',
    'base64.usage3': 'All processing is done locally in your browser, no data is uploaded to servers',
    'base64.usage4': 'Click on history items to quickly repeat previous conversions',
    'base64.share': 'Share',
    'base64.shareResult': 'Share Result',
    'base64.shareCopied': 'Share link copied!',
    'geojson.title': 'GeoJSON Preview Tool',
    'geojson.subtitle': 'Generate geojson.io preview links for your GeoJSON data',
    'geojson.backToTools': 'Back to Tools',
    'geojson.inputLabel': 'Input GeoJSON',
    'geojson.outputLabel': 'Preview Link',
    'geojson.placeholder': 'Paste your GeoJSON data here...',
    'geojson.loadExample': 'Load Example',
    'geojson.generate': 'Generate Preview Link',
    'geojson.clear': 'Clear',
    'geojson.copy': 'Copy',
    'geojson.openPreview': 'Open Preview',
    'geojson.resultPlaceholder': 'Generated preview link will appear here...',
    'geojson.validationError': 'Invalid GeoJSON format',
    'geojson.shareCopied': 'Preview link copied!',
    'geojson.usageTitle': 'Usage Instructions',
    'geojson.usage1': 'Paste valid GeoJSON data into the input field',
    'geojson.usage2': 'Supports all GeoJSON types: Feature, FeatureCollection, etc.',
    'geojson.usage3': 'Generated links can be viewed and edited directly on geojson.io',
    'geojson.usage4': 'Large files automatically use GitHub Gist for permanent storage',
    'geojson.usage5': 'Perfect for geographic data visualization and sharing',
    'geojson.storageMethod': 'Storage Method',
    'geojson.largeFile': 'Large File',
    'geojson.smallFile': 'Small File',
    'geojson.urlMethod': 'URL Method',
    'geojson.urlMethodDesc': 'Fast, but size limited',
    'geojson.gistMethod': 'GitHub Gist',
    'geojson.gistMethodDesc': 'Supports large files, permanent storage',
    'geojson.largeSizeWarning': '‚ö†Ô∏è Large file detected, recommend using Gist method for better experience',
    'geojson.uploading': 'Uploading...',
    'geojson.gistError': 'Failed to create Gist, please try again later',
    'geojson.githubToken': 'GitHub Token',
    'geojson.optional': 'Optional',
    'geojson.tokenPlaceholder': 'Enter your GitHub Personal Access Token...',
    'geojson.tokenHelp': 'Providing a token avoids API limits and lets you manage your Gists',
    'geojson.howToGet': 'How to get?',
    'geojson.tokenStepsTitle': 'Steps to get GitHub Personal Access Token:',
    'geojson.tokenStep1': 'Visit GitHub.com and sign in to your account',
    'geojson.tokenStep2': 'Go to Settings > Developer settings > Personal access tokens > Tokens (classic)',
    'geojson.tokenStep3': 'Click "Generate new token" > "Generate new token (classic)"',
    'geojson.tokenStep4': 'Select "gist" scope (other scopes are optional)',
    'geojson.tokenStep5': 'Click generate, copy the generated token and paste it into the input field above',
    'geojson.tokenNote': 'Note',
    'geojson.tokenNoteDesc': 'Token is only used for this session and will not be saved. For managing Gists, consider saving the token in your password manager.',
    'geojson.loginWithGitHub': 'GitHub Login',
    'geojson.useToken': 'Use Token',
    'geojson.signInWithGitHub': 'Sign in with GitHub',
    'geojson.loggedInAs': 'Logged in as',
    'geojson.gistWillBeCreated': 'Gist will be created in your account',
    'geojson.logout': 'Logout',
    'geojson.oauthError': 'GitHub login failed, please try again',
    'geojson.signingIn': 'Signing in...',
    'geojson.deviceFlow.instruction': 'Please visit GitHub in a new tab and enter the following code:',
    'geojson.deviceFlow.openGitHub': 'Open GitHub Authorization Page',
    'geojson.deviceFlow.copyCode': 'Copy Code',
    'geojson.deviceFlow.waiting': 'This page will update automatically after authorization',
    'geojson.deviceFlow.pollingInterval': 'Polling interval',
    'geojson.deviceFlow.seconds': 'seconds',
    'geojson.loginSaved': 'Login state saved, no need to login again on your next visit',
    'geojson.history': 'History',
    'geojson.clearHistory': 'Clear History',
    'geojson.noHistory': 'No history records',
    'geojson.viewGist': 'View Gist',
    'geojson.openPreviewNew': 'Open Preview',
    'geojson.timeAgo': 'ago',
    'geojson.fileTooLargeForUrl': '‚ö†Ô∏è Large file detected, URL may be too long. If link fails to open, recommend using Gist method.',
    'geojson.autoSwitchToGist': 'Data too complex for URL method. System automatically switched to Gist method.',
    'json-extract.title': 'JSON Path Extractor',
    'json-extract.subtitle': 'Extract values from JSON using JSONPath expressions',
    'json-extract.backToTools': 'Back to Tools',
    'json-extract.jsonData': 'JSON Data',
    'json-extract.loadExample': 'Load Example',
    'json-extract.placeholder': 'Paste your JSON data here...',
    'json-extract.suggestedPaths': 'Suggested Column Paths',
    'json-extract.suggestedPathsDesc': 'Click on a suggested path to add it as a new column:',
    'json-extract.extractionColumns': 'Extraction Columns',
    'json-extract.addColumn': 'Add Column',
    'json-extract.columnName': 'Column Name',
    'json-extract.columnPath': 'JSONPath (e.g., $.properties.title)',
    'json-extract.extractData': 'Extract Data',
    'json-extract.processing': 'Processing...',
    'json-extract.extractedData': 'Extracted Data',
    'json-extract.rows': 'rows',
    'json-extract.exportCSV': 'Export CSV',
    'json-extract.copyMarkdown': 'Copy Markdown',
    'json-extract.markdownCopied': 'Markdown Copied!',
    'json-extract.compareMode': 'Compare Mode',
    'json-extract.singleMode': 'Single Mode',
    'json-extract.jsonData1': 'JSON Data 1',
    'json-extract.jsonData2': 'JSON Data 2',
    'json-extract.compareResults': 'Comparison Results',
    'json-extract.copyPathsFromJson1': 'Copy JSON1 Paths',
    'json-extract.loadCompareExample': 'Load Compare Example',
    'json-extract.comparisonLegend': 'Comparison Legend',
    'json-extract.legendSame': 'Same',
    'json-extract.legendDifferent': 'Different',
    'json-extract.legendOnlyJson1': 'Only in JSON1',
    'json-extract.legendOnlyJson2': 'Only in JSON2',
    'json-extract.clear': 'Clear',
    'json-extract.clearAllColumns': 'Clear All Columns',
    'json-extract.usageTitle': 'JSONPath Examples',
    'json-extract.usage1': 'Extract title from properties',
    'json-extract.usage2': 'Extract name from all features',
    'json-extract.usage3': 'Extract value from first item in data array',
    'json-extract.usage4': 'Extract email from all user profiles',
    'json-extract.usage5': 'Extract all tags from all items',
    'json-extract.enterJsonData': 'Please enter JSON data',
    'coordinate-converter.title': 'GIS Coordinate Converter',
    'coordinate-converter.subtitle': 'Convert coordinates between different geographic coordinate systems',
    'coordinate-converter.backToTools': 'Back to Tools',
    'coordinate-converter.inputCoordinates': 'Input Coordinates',
    'coordinate-converter.sourceSystem': 'Source Coordinate System',
    'coordinate-converter.coordinates': 'Coordinates',
    'coordinate-converter.example': 'Example',
    'coordinate-converter.convert': 'Convert',
    'coordinate-converter.converting': 'Converting...',
    'coordinate-converter.loadExample': 'Load Example',
    'coordinate-converter.clear': 'Clear',
    'coordinate-converter.results': 'Conversion Results',
    'coordinate-converter.copy': 'Copy',
    'coordinate-converter.copied': 'Copied',
    'coordinate-converter.share': 'Copy Result Link',
    'coordinate-converter.shared': 'Link Copied',
    'coordinate-converter.export': 'Export',
    'coordinate-converter.exportJSON': 'Export JSON',
    'coordinate-converter.exportCSV': 'Export CSV',
    'coordinate-converter.shareResults': 'Copy Result Link',
    'coordinate-converter.sourceCoordinates': 'Source Coordinates',
    'coordinate-converter.sharedFrom': 'Shared from',
    'coordinate-converter.openLink': 'Open Link',
    'coordinate-converter.loadingFromUrl': 'Loading coordinates from shared link...',
    'coordinate-converter.enterCoordinates': 'Please enter coordinates',
    'coordinate-converter.usageTitle': 'Supported Coordinate Systems',
    'coordinate-converter.usage1': 'World Geodetic System, GPS standard coordinates',
    'coordinate-converter.usage2': 'Chinese encrypted coordinate system for domestic map services',
    'coordinate-converter.usage3': 'Baidu Maps coordinate system',
    'coordinate-converter.usage4': 'Universal Transverse Mercator projection',
    'coordinate-converter.usage5': 'Web mapping standard projection coordinates',
    'bbox.title': 'BBox Drawing Tool',
    'bbox.subtitle': 'Draw rectangles on an interactive map to generate bounding box coordinates',
    'bbox.backToTools': 'Back to Tools',
    'bbox.inputBbox': 'Input Bounding Box',
    'bbox.coordinates': 'Coordinates (MinLng, MinLat, MaxLng, MaxLat)',
    'bbox.example': 'Example',
    'bbox.convert': 'Convert',
    'bbox.converting': 'Converting...',
    'bbox.loadExample': 'Load Example',
    'bbox.clear': 'Clear',
    'bbox.results': 'Results',
    'bbox.copy': 'Copy',
    'bbox.copied': 'Copied!',
    'bbox.share': 'Share',
    'bbox.shared': 'Share link copied!',
    'bbox.exportGeoJSON': 'Export GeoJSON',
    'bbox.info': 'Bounding Box Info',
    'bbox.centerPoint': 'Center Point',
    'bbox.width': 'Width',
    'bbox.height': 'Height',
    'bbox.area': 'Area',
    'bbox.enterBbox': 'Please enter bounding box coordinates',
    'bbox.loadingFromUrl': 'Loading from URL...',
    'bbox.usageTitle': 'Usage Instructions',
    'bbox.usage1': 'Enter coordinates in MinLng, MinLat, MaxLng, MaxLat format',
    'bbox.usage2': 'Supports various formats: with/without brackets or quotes',
    'bbox.usage3': 'Click Convert to see results in different formats',
    'bbox.usage4': 'Use Copy buttons to copy specific formats',
    'bbox.usage5': 'Export as GeoJSON for use in mapping applications',
    'footer.descriptionBefore': 'Visit my blog at ',
    'footer.descriptionAfter': '. I built this collection of development tools to make coding life easier‚Äîfeel free to explore and enjoy!'
  }
};

export function LanguageProvider({ children }: { children: ReactNode }) {
  const router = useRouter();
  const pathname = usePathname();
  const [language, setLanguage] = useState<Language>('en');

  useEffect(() => {
    // ‰ªéURLË∑ØÂæÑ‰∏≠Ëé∑ÂèñËØ≠Ë®ÄÂèÇÊï∞
    const pathSegments = pathname.split('/');
    const langSegment = pathSegments[1]; // Á¨¨‰∏Ä‰∏™ÊÆµÂ∫îËØ•ÊòØËØ≠Ë®ÄÂèÇÊï∞
    
    if (langSegment === 'zh') {
      setLanguage('zh');
    } else if (langSegment === 'en') {
      setLanguage('en');
    } else {
      setLanguage('en');
    }
  }, [pathname]);

  const changeLanguage = (lang: Language) => {
    // ÂàáÊç¢Âà∞ÂØπÂ∫îÁöÑËØ≠Ë®ÄË∑ØÁî±
    const pathSegments = pathname.split('/');
    const currentLang = pathSegments[1];
    
    if (['zh', 'en'].includes(currentLang)) {
      // Â¶ÇÊûúÂΩìÂâçË∑ØÂæÑÂ∑≤ÁªèÂåÖÂê´ËØ≠Ë®ÄÂèÇÊï∞
      const restPath = pathSegments.slice(2).join('/');
      if (lang === 'en') {
        // Ëã±ÊñáÁâàÔºöÂ¶ÇÊûúÊòØÈ¶ñÈ°µÔºåË∑≥ËΩ¨Âà∞Ê†πË∑ØÂæÑÔºåÂê¶Âàô‰ΩøÁî® /en/xxx
        const newPath = restPath ? `/en/${restPath}` : '/';
        router.push(newPath);
      } else {
        // ‰∏≠ÊñáÁâàÔºöÂßãÁªà‰ΩøÁî® /zh/xxx
        const newPath = restPath ? `/zh/${restPath}` : '/zh';
        router.push(newPath);
      }
    } else {
      // Â¶ÇÊûúÂΩìÂâçË∑ØÂæÑ‰∏çÂåÖÂê´ËØ≠Ë®ÄÂèÇÊï∞ÔºàÊ†πË∑ØÂæÑ /Ôºâ
      if (lang === 'zh') {
        const newPath = pathname === '/' ? '/zh' : `/zh${pathname}`;
        router.push(newPath);
      } else {
        // Ëã±ÊñáÁâàÔºåÂ¶ÇÊûúÊòØÈ¶ñÈ°µÂ∞±ÁïôÂú®Ê†πË∑ØÂæÑ
        if (pathname !== '/') {
          const newPath = `/en${pathname}`;
          router.push(newPath);
        }
        // Â¶ÇÊûúÂ∑≤ÁªèÊòØÊ†πË∑ØÂæÑÔºåÂ∞±‰∏çÈúÄË¶ÅË∑≥ËΩ¨
      }
    }
  };

  const t = (key: string): string => {
    return (translations[language] as Record<string, string>)[key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage: changeLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
}